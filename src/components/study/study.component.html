<div class="container py-8">
      <h1 class="text-2xl font-bold mb-6">H·ªçc b√†i theo ƒë·ªÅ</h1>

      <div class="mb-6">
        <div class="info-card">
          <h3 class="info-title">H∆∞·ªõng d·∫´n h·ªçc b√†i</h3>
          <ul class="info-list">
            <li>‚Ä¢ M·ªói ƒë·ªÅ c√≥ 20 c√¢u h·ªèi (ƒë·ªÅ cu·ªëi c√≥ th·ªÉ √≠t h∆°n)</li>
            <li>‚Ä¢ L√†m xong s·∫Ω c√≥ b√°o c√°o k·∫øt qu·∫£ chi ti·∫øt</li>
            <li>‚Ä¢ K·∫øt qu·∫£ m·ªõi s·∫Ω ghi ƒë√® l√™n k·∫øt qu·∫£ c≈©</li>
            <li>‚Ä¢ C√≥ th·ªÉ l√†m l·∫°i nhi·ªÅu l·∫ßn ƒë·ªÉ c·∫£i thi·ªán ƒëi·ªÉm s·ªë</li>
          </ul>
        </div>
      </div>

      <div class="study-grid">
        <div *ngFor="let set of studySets" class="study-card">
          <div class="card-header">
            <div class="card-title">
              <h3 class="set-name">{{ set.name }}</h3>
              <p class="set-info">{{ set.questions.length }} c√¢u h·ªèi</p>
            </div>
            <div class="card-score">
              <div
                *ngIf="getSetResult(set._id) as result"
                class="score-display"
              >
                <div
                  class="score-percentage"
                  [class.score-excellent]="result.score >= 0.8"
                  [class.score-good]="result.score >= 0.5 && result.score < 0.8"
                  [class.score-poor]="result.score < 0.5"
                >
                  {{ result.score * 100 | number : "1.0-0" }}%
                </div>
                <div class="score-details">
                  {{
                    result.score * result.totalQuestions | number : "1.0-0"
                  }}/{{ result.totalQuestions }}
                </div>
                <div class="score-date">
                  {{ result.completedAt | date : "dd/MM HH:mm" }}
                </div>
              </div>
              <div *ngIf="!getSetResult(set._id)" class="no-score">
                <div class="no-score-icon">üìù</div>
                <div class="no-score-text">Ch∆∞a l√†m</div>
              </div>
            </div>
          </div>

          <div class="card-content">
            <div class="categories-section">
              <div class="categories-label">Danh m·ª•c:</div>
              <div class="categories-list">
                <span
                  *ngFor="let category of getCategories(set)"
                  class="category-tag"
                >
                  {{ category }}
                </span>
              </div>
            </div>

            <div
              class="progress-section"
              *ngIf="getSetResult(set._id) as result"
            >
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  [style.width.%]="result.score * 100"
                  [class.progress-excellent]="result.score >= 0.8"
                  [class.progress-good]="
                    result.score >= 0.5 && result.score < 0.8
                  "
                  [class.progress-poor]="result.score < 0.5"
                ></div>
              </div>
            </div>
          </div>

          <div class="card-actions">
            <!-- B·∫Øt ƒë·∫ßu - when never attempted -->
            <button
              *ngIf="!getSetResult(set._id)"
              class="action-btn btn-start"
              (click)="startStudySet(set)"
            >
              <span class="btn-icon">üöÄ</span>
              <span class="btn-text">B·∫Øt ƒë·∫ßu</span>
            </button>

            <!-- Xem l·∫°i v√† L√†m l·∫°i - when already attempted -->
            <div *ngIf="getSetResult(set._id)" class="action-buttons-group">
              <button
                class="action-btn btn-review"
                (click)="reviewStudySet(set)"
              >
                <span class="btn-icon">üëÅÔ∏è</span>
                <span class="btn-text">Xem l·∫°i</span>
              </button>

              <button
                class="action-btn btn-retake"
                (click)="confirmRetakeStudySet(set)"
              >
                <span class="btn-icon">üîÑ</span>
                <span class="btn-text">L√†m l·∫°i</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="studySets.length === 0" class="empty-state">
        <div class="empty-icon">üìö</div>
        <h3 class="empty-title">Ch∆∞a c√≥ c√¢u h·ªèi n√†o</h3>
        <p class="empty-description">Th√™m c√¢u h·ªèi ƒë·ªÉ b·∫Øt ƒë·∫ßu h·ªçc b√†i</p>
        <button
          class="btn btn-primary"
          (click)="router.navigate(['/questions'])"
        >
          Th√™m c√¢u h·ªèi
        </button>
      </div>
    </div>