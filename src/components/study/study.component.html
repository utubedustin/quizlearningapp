<div class="container py-8">
      <h1 class="text-2xl font-bold mb-6">Há»c bÃ i theo Ä‘á»</h1>

      <div class="mb-6">
        <div class="info-card">
          <h3 class="info-title">HÆ°á»›ng dáº«n há»c bÃ i</h3>
          <ul class="info-list">
            <li>â€¢ Má»—i Ä‘á» cÃ³ 20 cÃ¢u há»i (Ä‘á» cuá»‘i cÃ³ thá»ƒ Ã­t hÆ¡n)</li>
            <li>â€¢ LÃ m xong sáº½ cÃ³ bÃ¡o cÃ¡o káº¿t quáº£ chi tiáº¿t</li>
            <li>â€¢ Káº¿t quáº£ má»›i sáº½ ghi Ä‘Ã¨ lÃªn káº¿t quáº£ cÅ©</li>
            <li>â€¢ CÃ³ thá»ƒ lÃ m láº¡i nhiá»u láº§n Ä‘á»ƒ cáº£i thiá»‡n Ä‘iá»ƒm sá»‘</li>
            <li>â€¢ <strong>Äá» "Há»c láº¡i cÃ¢u sai"</strong> chá»©a cÃ¡c cÃ¢u Ä‘Ã£ tráº£ lá»i sai, sáº½ tá»± Ä‘á»™ng loáº¡i bá» cÃ¢u khi tráº£ lá»i Ä‘Ãºng</li>
          </ul>
        </div>
      </div>

      <div class="study-grid">
        <div *ngFor="let set of studySets" class="study-card" [class.wrong-answers-card]="set._id === 'wrong-answers-set'">
          <div class="card-header">
            <div class="card-title">
              <h3 class="set-name">
                {{ set.name }}
                <span *ngIf="set._id === 'wrong-answers-set'" class="wrong-answers-badge">ğŸ”„</span>
              </h3>
              <p class="set-info">{{ set.questions.length }} cÃ¢u há»i</p>
            </div>
            <div class="card-score">
              <div
                *ngIf="getSetResult(set._id) as result"
                class="score-display"
              >
                <div
                  class="score-percentage"
                  [class.score-excellent]="result.score >= 0.8"
                  [class.score-good]="result.score >= 0.5 && result.score < 0.8"
                  [class.score-poor]="result.score < 0.5"
                >
                  {{ result.score * 100 | number : "1.0-0" }}%
                </div>
                <div class="score-details">
                  {{
                    result.score * result.totalQuestions | number : "1.0-0"
                  }}/{{ result.totalQuestions }}
                </div>
                <div class="score-date">
                  {{ result.completedAt | date : "dd/MM HH:mm" }}
                </div>
              </div>
              <div *ngIf="!getSetResult(set._id)" class="no-score">
                <div class="no-score-icon">ğŸ“</div>
                <div class="no-score-text">ChÆ°a lÃ m</div>
              </div>
            </div>
          </div>

          <div class="card-content">
            <div class="categories-section">
              <div class="categories-label">Danh má»¥c:</div>
              <div class="categories-list">
                <span
                  *ngFor="let category of getCategories(set)"
                  class="category-tag"
                  [class.wrong-answers-tag]="set._id === 'wrong-answers-set'"
                >
                  {{ category }}
                </span>
              </div>
            </div>

            <div
              class="progress-section"
              *ngIf="getSetResult(set._id) as result"
            >
              <div class="progress-bar">
                <div
                  class="progress-fill"
                  [style.width.%]="result.score * 100"
                  [class.progress-excellent]="result.score >= 0.8"
                  [class.progress-good]="
                    result.score >= 0.5 && result.score < 0.8
                  "
                  [class.progress-poor]="result.score < 0.5"
                  [class.progress-wrong-answers]="set._id === 'wrong-answers-set'"
                ></div>
              </div>
            </div>
          </div>

          <div class="card-actions">
            <!-- Báº¯t Ä‘áº§u - when never attempted -->
            <button
              *ngIf="!getSetResult(set._id)"
              class="action-btn"
              [class.btn-start]="set._id !== 'wrong-answers-set'"
              [class.btn-wrong-answers]="set._id === 'wrong-answers-set'"
              (click)="startStudySet(set)"
            >
              <span class="btn-icon">{{ set._id === 'wrong-answers-set' ? 'ğŸ”„' : 'ğŸš€' }}</span>
              <span class="btn-text">{{ set._id === 'wrong-answers-set' ? 'Há»c láº¡i' : 'Báº¯t Ä‘áº§u' }}</span>
            </button>

            <!-- Xem láº¡i vÃ  LÃ m láº¡i - when already attempted -->
            <div *ngIf="getSetResult(set._id)" class="action-buttons-group">
              <button
                class="action-btn btn-review"
                (click)="reviewStudySet(set)"
              >
                <span class="btn-icon">ğŸ‘ï¸</span>
                <span class="btn-text">Xem láº¡i</span>
              </button>

              <button
                class="action-btn"
                [class.btn-retake]="set._id !== 'wrong-answers-set'"
                [class.btn-wrong-answers]="set._id === 'wrong-answers-set'"
                (click)="confirmRetakeStudySet(set)"
              >
                <span class="btn-icon">ğŸ”„</span>
                <span class="btn-text">LÃ m láº¡i</span>
              </button>
            </div>

            <!-- NÃºt xÃ³a Ä‘á» cÃ¢u sai -->
            <div *ngIf="set._id === 'wrong-answers-set'" class="mt-2">
              <button
                class="action-btn btn-clear-wrong"
                (click)="confirmClearWrongAnswers()"
              >
                <span class="btn-icon">ğŸ—‘ï¸</span>
                <span class="btn-text">XÃ³a Ä‘á» nÃ y</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="studySets.length === 0" class="empty-state">
        <div class="empty-icon">ğŸ“š</div>
        <h3 class="empty-title">ChÆ°a cÃ³ cÃ¢u há»i nÃ o</h3>
        <p class="empty-description">ThÃªm cÃ¢u há»i Ä‘á»ƒ báº¯t Ä‘áº§u há»c bÃ i</p>
        <button
          class="btn btn-primary"
          (click)="router.navigate(['/questions'])"
        >
          ThÃªm cÃ¢u há»i
        </button>
      </div>
    </div>